<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Rooster Kombat</title>

<style>
body {
    margin: 0;
    background: radial-gradient(circle, #111, #3a6073);
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
    overflow: hidden;
}

body.strobe {
    animation: strobe 0.15s alternate 6;
}
@keyframes strobe {
    from { background: white; }
    to { background: black; }
}

h1 { margin: 10px; }

.arena {
    position: relative;
    width: 95%;
    height: 360px;
    margin: 20px auto 80px;
    border-bottom: 4px solid #fff;
    overflow: hidden;
}

.rooster {
    position: absolute;
    bottom: 0;
    font-size: 80px;
    user-select: none;
    transition: transform 0.15s;
}

.red { filter: hue-rotate(0deg) saturate(2); }
.blue { filter: hue-rotate(200deg) saturate(2); }

.jump { animation: jump 0.45s ease-out; }
@keyframes jump {
    0% { bottom: 0; }
    50% { bottom: 140px; }
    100% { bottom: 0; }
}

.duck { transform: scaleY(0.6); }

.knife {
    position: absolute;
    font-size: 30px;
    animation: spin 0.3s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

.knife.fire {
    color: orange;
    text-shadow: 0 0 10px red, 0 0 20px orange;
}
.knife.lightning {
    color: cyan;
    text-shadow: 0 0 10px cyan, 0 0 20px white;
}

.feather {
    position: absolute;
    font-size: 20px;
    animation: featherFall 1s forwards;
}
@keyframes featherFall {
    to { transform: translateY(80px) rotate(360deg); opacity: 0; }
}

.shockwave {
    position: absolute;
    width: 20px;
    height: 20px;
    border: 3px solid white;
    border-radius: 50%;
    animation: shock 0.6s ease-out forwards;
}
@keyframes shock {
    to { transform: scale(8); opacity: 0; }
}

.confetti {
    position: absolute;
    width: 8px;
    height: 14px;
    animation: fall 3s linear forwards;
}
@keyframes fall {
    to { transform: translateY(600px) rotate(720deg); opacity: 0; }
}

.health-bar {
    width: 200px;
    height: 16px;
    border: 2px solid #fff;
    margin: 6px auto;
    background: #333;
}
.health { height: 100%; background: limegreen; }

#winner {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    font-size: 64px;
    background: rgba(0,0,0,0.6);
    z-index: 999;
}

.controls {
    position: fixed;
    bottom: 0;
    width: 100%;
    background: rgba(0,0,0,0.75);
    padding: 10px;
    font-size: 14px;
    display: flex;
    justify-content: space-around;
    z-index: 100;
}
</style>
</head>

<body>

<!-- CLICK TO START OVERLAY -->
<div id="startOverlay"
     style="position:fixed;inset:0;background:#000;
     display:flex;align-items:center;justify-content:center;
     font-size:32px;z-index:1000;cursor:pointer;">
CLICK TO START GAME ğŸ”Š
</div>

<h1>ğŸ“ ROOSTER KOMBAT ğŸ”¥âš¡</h1>

<div class="arena" id="arena">
    <div id="r1" class="rooster red">ğŸ“</div>
    <div id="r2" class="rooster blue">ğŸ“</div>
</div>

<div class="health-bar"><div id="h1" class="health"></div></div>
<div class="health-bar"><div id="h2" class="health"></div></div>

<div id="winner"></div>

<div class="controls">
    ğŸ”´ A/D Move Â· W Jump Â· S Duck Â· F Fire  
    ğŸ”µ â†/â†’ Move Â· â†‘ Jump Â· â†“ Duck Â· Enter Fire
</div>

<!-- AUDIO -->
<audio id="bgm" loop src="https://assets.mixkit.co/music/preview/mixkit-epic-dark-fight-1230.mp3"></audio>
<audio id="throw" src="https://assets.mixkit.co/sfx/preview/mixkit-fast-sword-whoosh-2792.mp3"></audio>
<audio id="hit" src="https://assets.mixkit.co/sfx/preview/mixkit-knife-stab-2084.mp3"></audio>
<audio id="clap" src="https://assets.mixkit.co/sfx/preview/mixkit-audience-clapping-strong-476.mp3"></audio>

<script>
/* AUDIO SETUP */
const bgm = document.getElementById("bgm");
const throwSound = document.getElementById("throw");
const hitSound = document.getElementById("hit");
const clapSound = document.getElementById("clap");

[bgm, throwSound, hitSound, clapSound].forEach(a => {
    a.load();
    a.volume = 0.6;
});

function playSound(audio) {
    audio.currentTime = 0;
    const p = audio.play();
    if (p !== undefined) p.catch(()=>{});
}

/* CLICK TO START */
let started = false;
document.getElementById("startOverlay").onclick = () => {
    playSound(bgm);
    document.getElementById("startOverlay").remove();
    started = true;
};

/* GAME LOGIC */
const arena = document.getElementById("arena");
const r1 = document.getElementById("r1");
const r2 = document.getElementById("r2");
const h1 = document.getElementById("h1");
const h2 = document.getElementById("h2");
const winnerBox = document.getElementById("winner");

let pos1 = 60, pos2 = arena.offsetWidth - 140;
let hits1 = 0, hits2 = 0;
let combo1 = 0, combo2 = 0;
const MAX_HITS = 100;

let jumping1=false,jumping2=false,ducking1=false,ducking2=false;
let gameOver=false;
const keys={};

document.addEventListener("keydown", e => {
    keys[e.key]=true;
    if(gameOver) return;
    if(e.key==="w"&&!jumping1) jump(r1,1);
    if(e.key==="ArrowUp"&&!jumping2) jump(r2,2);
    if(e.key==="f") throwKnife(true);
    if(e.key==="Enter") throwKnife(false);
});

document.addEventListener("keyup", e => {
    keys[e.key]=false;
    if(e.key==="s"){ducking1=false;r1.classList.remove("duck");}
    if(e.key==="ArrowDown"){ducking2=false;r2.classList.remove("duck");}
});

function jump(r,n){
    r.classList.add("jump");
    n===1?jumping1=true:jumping2=true;
    setTimeout(()=>{r.classList.remove("jump");n===1?jumping1=false:jumping2=false;},450);
}

function face(){
    r1.style.transform=pos1<pos2?"scaleX(-1)":"scaleX(1)";
    r2.style.transform=pos2<pos1?"scaleX(-1)":"scaleX(1)";
}

function throwKnife(isRed){
    playSound(throwSound);
    const knife=document.createElement("div");
    knife.className="knife "+(Math.random()<0.5?"fire":"lightning");
    knife.textContent="ğŸ—¡ï¸";
    let x=(isRed?pos1:pos2)+40;
    let target=isRed?pos2:pos1;
    let dir=Math.sign(target-x);
    knife.style.left=x+"px";
    knife.style.bottom="80px";
    arena.appendChild(knife);

    const move=setInterval(()=>{
        x+=dir*10;
        knife.style.left=x+"px";
        if(Math.abs(x-target)<40 && !(isRed?jumping2:jumping1)){
            knife.remove();clearInterval(move);hit(isRed);
        }
        if(x<-50||x>arena.offsetWidth+50){knife.remove();clearInterval(move);}
    },30);
}

function hit(isRed){
    playSound(hitSound);
    if(isRed){hits2++;combo2++;combo1=0;if(combo2===3)shock(r2);}
    else{hits1++;combo1++;combo2=0;if(combo1===3)shock(r1);}
    updateHealth();checkWin();
}

function shock(target){
    document.body.classList.add("strobe");
    setTimeout(()=>document.body.classList.remove("strobe"),900);
}

function updateHealth(){
    h1.style.width=((MAX_HITS-hits1)/MAX_HITS)*100+"%";
    h2.style.width=((MAX_HITS-hits2)/MAX_HITS)*100+"%";
}

function checkWin(){
    if(hits1>=MAX_HITS||hits2>=MAX_HITS){
        gameOver=true;
        bgm.pause();
        playSound(clapSound);
        winnerBox.style.display="flex";
        winnerBox.textContent=hits1>=MAX_HITS?"ğŸ† BLUE WINS!":"ğŸ† RED WINS!";
    }
}

function update(){
    if(!gameOver){
        if(keys["a"])pos1-=4;
        if(keys["d"])pos1+=4;
        if(keys["ArrowLeft"])pos2-=4;
        if(keys["ArrowRight"])pos2+=4;
        if(keys["s"]){ducking1=true;r1.classList.add("duck");}
        if(keys["ArrowDown"]){ducking2=true;r2.classList.add("duck");}
        r1.style.left=pos1+"px";
        r2.style.left=pos2+"px";
        face();
    }
    requestAnimationFrame(update);
}
update();
</script>

</body>
</html>
